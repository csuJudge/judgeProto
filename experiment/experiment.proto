syntax            = "proto3";
option go_package = "github.com/csuJudge/judgeProto/experiment";

package oj.experiment;

service ExperimentServer {
  // AddKeyAction 添加击键行为
  rpc AddKeyAction(AddKeyActionReq) returns (CommonRsp) {}
  // AddCode 添加代码
  rpc AddCode(AddCodeReq) returns (CommonRsp) {}
  // QueryCode 查询代码
  rpc QueryCode(QueryCodeReq) returns (QueryCodeRsp) {}
}

message CommonRsp {
  string message = 1;  // 返回信息
  int32 code     = 2;  // 返回码
}

message AddCodeReq{
  int32 problemID = 1; // 题目编号
  string code = 2; // 代码
  int32 userID = 3; // 用户编号
  int32 codeType = 4;  // 代码类型
  string  fileName = 5; // 代码名称
  int32 solutionType = 6; // 提交类型
  string remoteIP = 7; // 提交IP
}

message QueryCodeReq{
  int32 problemID = 1; // 题目编号
  int32 userID = 2; // 用户编号
}

message QueryCodeRsp{
  string message = 1;  // 返回信息
  int32 code     = 2;  // 返回码
  Code userCode = 3; // 代码
}

message AddKeyActionReq{
  string action = 1; // 击键行为
  int32 solutionID = 2; // 提交编号
  string startTime = 3; // 开始时间
  int32 problemID = 4; // 题目编号
  int32 userID = 5; // 用户编号
  int32 solutionType = 6; // 提交类型
  string remoteIP = 7; // 提交IP
}

message Code{
  int32 Language = 1; // 语言
  string Code = 2; // 代码
}